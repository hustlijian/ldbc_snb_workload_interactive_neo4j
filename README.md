Neo4j Data Importer & Workload Runner for LDBC Social Network Benchmark
---------------------

This is a reference implementation of the LDBC Social Network benchmark, for the [Neo4j](http://www.neo4j.org/) graph database.
It contains code for the following:

1. Importing datasets generated by the [LDBC Social Network Data Generator](https://github.com/ldbc/ldbc_snb_datagen) into Neo4j
2. Running workloads from the [LDBC Social Network Workload Definition](https://github.com/ldbc/ldbc_snb_docs) against Neo4j

**Build**

Initial build (**NOTE: requires Java 7, Git 1.8+, Maven 3.0+**):

	git clone https://github.com/ldbc/ldbc_socialnet_bm_neo4j.git
	cd ldbc_socialnet_bm_neo4j
	./build.sh

Subsequent builds:

	mvn clean package -DskipTests

This produces importer and runner uberjars in the target folder.

**Import Example**

```
$ java -jar target/importer.jar where/db/will/be/created/ where/csv/files/are/ path/to/neo4j.properties
```
	
The resulting Neo4j instance will have [this schema](https://github.com/ldbc/ldbc_socialnet_bm_neo4j/wiki/Schema)

**Run Example**

Valid values for `neo4j.dbtype`: `embedded-api-steps`, `embedded-cypher`, `remote-cypher`.

*embedded-api-steps:*

```
$ java -jar target/runner.jar -db com.ldbc.snb.interactive.neo4j.Neo4jDb \
    -w com.ldbc.driver.workloads.ldbc.snb.interactive.LdbcSnbInteractiveWorkload \
    -oc 10 \
    -tc 1 \
    -tu MILLISECONDS \
    -nm BENCHMARK_NAME \
    -rd results_dir \
    -P ldbc_driver/workloads/ldbc/socnet/interactive/ldbc_socnet_interactive.properties \
    -p "parameters_dir|/Users/lassewesth/Software/ldbc_sf001/substitution_parameters/" \
    -p "neo4j.path|/tmp/graph.db/" \
    -p "neo4j.dbtype|embedded-api-steps" \
    -p "neo4j.config|src/main/resources/neo4j_run_dev.properties"
```

You might need to pass extra parameters to the JVM, e.g. `-server -XX:+UseConcMarkSweepGC -Xmx512m`

Upon completion `results_dir` (or whatever you set `-rd`/`--resultsdir` to) will contain two files, results and the configuration parameters used to run the benchmark:
```
$ ls results_dir/
BENCHMARK_NAME-configuration.properties	BENCHMARK_NAME-results.json
```

The workload is run using [ldbc_driver](https://github.com/ldbc/ldbc_driver). For more details about configuration options and general usage please refer to the wiki of that project.
